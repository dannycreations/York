echo "Running pre-commit checks..."

echo "Running Format..."
if ! OUTPUT=$(npm run format -- --no-color 2>&1); then
  echo "$OUTPUT"
  echo "❌ Format script failed to run"
  exit 1
fi

if echo "$OUTPUT" | grep -E "[[:space:]][0-9.]+(ms|s)$" > /dev/null; then
  echo "❌ Please try committing again"
  exit 1
fi

echo "Running Build..."
npm run build || {
  echo "❌ Please fix the errors and try committing again"
  exit 1
}

echo "✅ All checks passed!"
